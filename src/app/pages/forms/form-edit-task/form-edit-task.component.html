<div class="form-bg">
    <div class="form-content">
        <!-- <span class="closer" (click)="goBack()">Back</span> -->
        <!-- <h2>{{data['tasks'].name}}</h2> -->
        <form [formGroup]="editTask" submit="onSubmit()">
            <section>

                <!-- <div>Barre d'Ã©volution</div>  <span>{{task?.progression}}%</span>-->
                <!-- <span>Mark complete</span> -->
            </section>
            <section>
                <div>
                    <mat-form-field>

                        <input matInput placeholder="Task's name" name="name" type="text" formControlName="name"
                            required>
                        <mat-error *ngIf="editTask.controls['name'].invalid">The name is required</mat-error>

                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field>
                        <textarea matInput placeholder="Description" name="description" ngMaxlength="250"
                            formControlName="description"></textarea>
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field>
                        <input matInput placeholder="Time estimated" name="estimated" formControlName="estimated">
                    </mat-form-field>
                </div>
                <div>
                    <mat-form-field>
                        <input matInput [matDatepicker]="deadline" placeholder="Deadline" formControlName="deadline">
                        <mat-datepicker-toggle matSuffix [for]="deadline"></mat-datepicker-toggle>
                        <mat-datepicker #deadline></mat-datepicker>
                    </mat-form-field>
                </div>
            </section>
            <section>
                <mat-form-field>
                    <div>Priority : </div>
                    <select matNativeControl name="priority" id="priority" formControlName="priority">
                        <option value="none">None</option>
                        <option value="high">High</option>
                        <option value="middle">Middle</option>
                        <option value="low">Low</option>
                    </select> <br />
                </mat-form-field>
                <div>created by {{task?.author_id}}</div>
            </section>
            <section>
                <h3>Members</h3>

                <ul>
                    <li *ngFor="let member of task?.assigned"><img src="{{member.avatar_url}}"
                            alt="{{member.user_id}}"><button (click)="unnasignedUser(member.user_id)">Remove
                            user</button></li>
                    <li>
                        <mat-form-field>
                            <select matNativeControl name="assigned" formControlName="assigned">
                                <option [value]="assign" selected>Assign a member</option>
                                <option [value]="user" *ngFor="let user of project?.users">{{user._id}}</option>
                            </select>
                        </mat-form-field>
                    </li>
                </ul>
            </section>

            <!-- <section>
                <div *ngFor="let comment of task?.comments">
                    <h4>{{getMember(comment.author_id)}} - {{comment.date}}</h4>
                    <span>{{comment.comment}}</span>
                </div>
                <span>{{logged.username || logged.firstname || logged.email || 'Your comment'}} :</span>
                <textarea ngModel name="newComment" maxlength="250"></textarea>
                <button (click)="sendComment(f.value.newComment)">Send your comment</button>
            </section> -->
            <section>
                <h3>To do list</h3>
                <ul>
                    <li *ngFor="let c of task?.checklist; let i = index">
                        <mat-checkbox>{{c.name}}</mat-checkbox>
                        <button (click)="removeFromChecklist(i)">Remove</button>
                    </li>
                    </ul>
                    <input name="addingtochecklist" type="text" maxlength="20"> 
                    <button (click)="addToCheckList()">Add item</button>
            </section>
            <!-- <section>
                <h3>Time spend</h3>
                <input ngModel name="spend" type="text" maxlength="20"> <button (click)="addTime(f.value.spend)">Add my time</button> <br/>
                <span>Total time : {{ 'NEED TO UPDATE DB '}}</span> <br/>
                <span *ngIf="task?.assigned">My time : {{time_total }}</span>
            </section> -->
            <div>
                <button mat-stroked-button type="submit">Edit Task</button>
                <button mat-stroked-button (click)="deleteTask()">Delete</button>
            </div>
        </form>
    </div>
</div>